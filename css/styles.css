/* ---------------------------------------------------
   DARK THEME + GLASS UI + CENTERED LAYOUT (pull-to-refresh enabled)
   - Keep page scrollable so mobile swipe-to-refresh works.
--------------------------------------------------- */

/* ---------- variables ---------- */
:root{
  --bg: linear-gradient(135deg,#0d0a18 0%,#1a1330 100%);
  --text: #e7daff;
  --muted: #bfb1da;
  --accent: #7bcfff;
  --glass-bg: rgba(255,255,255,0.06);
  --glass-border: rgba(255,255,255,0.08);
  --button-gradient: linear-gradient(135deg,#ff77d8,#7bcfff);
  --shadow-soft: 0 18px 40px rgba(0,0,0,0.45);
  --timing-fast: cubic-bezier(0.4,0,0.2,1);
  --max-stack-width: 880px;
}

/* ---------- base ---------- */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: "Segoe UI", system-ui, -apple-system, "Helvetica Neue", Arial;
  background:var(--bg);            /* DARK THEME */
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  text-rendering:optimizeLegibility;
  /* Allow page scrolling for pull-to-refresh */
  overflow-y:auto;
  -webkit-overflow-scrolling:touch;
}

/* glass base */
.glass{
  background:var(--glass-bg);
  border:1px solid var(--glass-border);
  backdrop-filter: blur(12px);
  border-radius:18px;
  box-shadow: var(--shadow-soft);
}

/* ---------- view wrapper (not fixed â€” allows pull-to-refresh) ---------- */
.view{
  min-height:100vh;               /* takes full viewport height but allows scroll */
  display:flex;
  align-items:center;
  justify-content:center;
  padding: clamp(16px,3vw,32px);
}

/* countdown */
.countdown-card{
  min-width:min(90vw,420px);
  padding:clamp(18px,4vw,28px);
  border-radius:20px;
  text-align:center;
  box-shadow:var(--shadow-soft);
}
.countdown-heading{margin:0 0 10px;font-size:clamp(18px,3.8vw,26px);opacity:0.95}
.countdown-number{margin:0;font-size:clamp(36px,9vw,64px);font-weight:700;color:var(--accent);letter-spacing:0.06em}

/* experience view hidden until active */
.experience-view{opacity:0;visibility:hidden;transition:opacity .5s, visibility .5s}
.experience-view.active{opacity:1;visibility:visible}

/* scene / stack centers everything and will remain centered on different devices */
.scene{position:relative;width:100%;max-width:var(--max-stack-width);display:flex;align-items:center;justify-content:center;min-height:60vh}
.ambient-glow{position:absolute;inset:0;filter:blur(80px);background:radial-gradient(circle at 50% 42%, rgba(255,200,255,0.04), transparent 40%);pointer-events:none}

/* central cake stack */
.stack{position:relative;z-index:10;display:flex;align-items:center;justify-content:center;width:100%}
.cake-wrapper{display:flex;justify-content:center;align-items:center;width:100%;height:auto;pointer-events:none}

/* cake container (contains PNG + overlay candles) */
.cake-container{position:relative;width:clamp(240px,45vw,380px);height:clamp(220px,45vw,380px);display:flex;justify-content:center;align-items:flex-end;overflow:visible;opacity:0;transform:translateY(18px);transition:transform .8s var(--timing-fast),opacity .6s ease}
.cake-container.show{opacity:1;transform:translateY(0)}
.cake-img{width:100%;height:auto;display:block;pointer-events:none;user-select:none}

/* the candle ring sits above the cake image (use z-index) */
.candles{position:absolute;bottom:70%;left:50%;transform:translateX(-50%);width:72%;height:64px;pointer-events:none;z-index:30}

/* candle visuals */
.candle{position:absolute;width:8px;height:30px;transform:translate(-50%,20px);opacity:0;transition:transform .45s var(--timing-fast),opacity .35s ease;z-index:40}
.candle.visible{transform:translate(-50%,100);opacity:1}
.candle-body{position:absolute;width:100%;height:100%;border-radius:8px 8px 4px 4px;background:linear-gradient(180deg,#7b020b,#500107)}
.candle-body::before{content:"";position:absolute;top:0;left:0;width:8px;height:4px;border-radius:50%;background:linear-gradient(180deg,#a80411,#620209)}
.wick{position:absolute;top:-10px;left:50%;width:2px;height:10px;transform:translateX(-50%);background:#2b1420;border-radius:999px}
.flame{position:absolute;top:-34px;left:50%;width:12px;height:30px;margin-left:-6px;border-radius:10px 10px 8px 8px/22px;background:radial-gradient(circle at 50% 25%, #fff9e6,#ffbb3f,#ff5a00);box-shadow:0 0 14px rgba(255,140,0,0.85);transform-origin:50% 90%;animation:flicker 1s ease-in-out alternate infinite}
.smoke{position:absolute;top:-12px;left:50%;transform:translateX(-50%);width:14px;height:14px;border-radius:50%;background:radial-gradient(circle, rgba(170,170,170,0.35), transparent);opacity:0}
.candle.extinguished .flame{animation:none;opacity:0;transform:translateY(-8px) scale(.4)}
.candle.extinguished .smoke{animation:smokeRise 1.2s ease-out forwards;opacity:1}

/* animations */
@keyframes flicker{0%{transform:translateX(-50%) scale(1)}100%{transform:translateX(-50%) scale(0.92) skewX(6deg)}}
@keyframes smokeRise{0%{transform:translateX(-50%) translateY(0) scale(.6);opacity:0}30%{opacity:.55;transform:translateX(-50%) translateY(-10px) scale(.85)}100%{opacity:0;transform:translateX(-50%) translateY(-30px) scale(1.25)}}

/* controls (fixed bottom center visually, but page still scrolls) */
.controls{position:fixed;bottom:22px;left:50%;transform:translateX(-50%);z-index:60;display:flex;gap:12px;justify-content:center;width:min(88vw,420px)}
.primary-button{background:var(--button-gradient);border:none;border-radius:999px;padding:.85rem 1.8rem;font-weight:800;color:#2a0a33;box-shadow:0 8px 30px rgba(0,0,0,.35);cursor:pointer}
.primary-button:disabled{opacity:.6;pointer-events:none}

/* message card (centered modal style) */
.message-card{position:fixed;top:50%;left:50%;transform:translate(-50%,-40%);width:min(92vw,520px);padding:1.4rem;border-radius:18px;background:var(--glass-bg);border:1px solid var(--glass-border);color:var(--text);backdrop-filter:blur(10px);box-shadow:var(--shadow-soft);opacity:0;pointer-events:none;z-index:70;transition:opacity .6s ease,transform .45s var(--timing-fast)}
.message-card.show{opacity:1;transform:translate(-50%,-50%);pointer-events:auto}
.message-card h2{text-align:center;margin:0 0 .6rem;line-height:1.25}
.message-card p{text-align:justify;margin:0}

/* confetti layer */
#confetti-layer{position:fixed;inset:0;pointer-events:none;z-index:55;overflow:hidden}

/* responsive tweaks */
@media(max-width:540px){
  .cake-container{width:clamp(220px,72vw,360px);height:clamp(220px,72vw,360px)}
  .candles{height:56px;bottom:76%}
  .message-card{width:min(94vw,420px)}
  .controls{bottom:14px;width:min(88vw,340px)}
}

/* noscript */
.noscript-message{position:fixed;inset:0;display:grid;place-items:center;padding:32px;background:rgba(0,0,0,0.45);text-align:center}
